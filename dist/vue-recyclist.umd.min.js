(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["vue-recyclist"]=e():t["vue-recyclist"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fb15")}({"28fb":function(t,e,i){},"363a":function(t,e,i){},"689f":function(t,e,i){"use strict";var s=i("28fb"),n=i.n(s);n.a},"74a1":function(t,e,i){"use strict";var s=i("363a"),n=i.n(s);n.a},8875:function(t,e,i){var s,n,o;(function(i,r){n=[],s=r,o="function"===typeof s?s.apply(e,n):s,void 0===o||(t.exports=o)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(f){var i,s,n,o=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,r=/@([^@]*):(\d+):(\d+)\s*$/gi,l=o.exec(f.stack)||r.exec(f.stack),a=l&&l[1]||!1,c=l&&l[2]||!1,h=document.location.href.replace(document.location.hash,""),d=document.getElementsByTagName("script");a===h&&(i=document.documentElement.outerHTML,s=new RegExp("(?:[^\\n]+?\\n){0,"+(c-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),n=i.replace(s,"$1").trim());for(var u=0;u<d.length;u++){if("interactive"===d[u].readyState)return d[u];if(d[u].src===a)return d[u];if(a===h&&d[u].innerHTML&&d[u].innerHTML.trim()===n)return d[u]}return null}}return t}))},fb15:function(t,e,i){"use strict";if(i.r(e),"undefined"!==typeof window){var s=window.document.currentScript,n=i("8875");s=n(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:n});var o=s&&s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(i.p=o[1])}var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["vue-recyclist",t.fixedItemHeight?"vue-recyclist--scroll-auto":"vue-recyclist--scroll-y"]},[i("div",{staticClass:"vue-recyclist-header"},[t._t("header")],2),i("div",{ref:"list",staticClass:"vue-recyclist-items",style:{height:t.height+"px","padding-top":t.topPadding+"px"}},[t._l(t.visibleItems,(function(e,s){return i("div",{key:s,staticClass:"vue-recyclist-item"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.tombstone,expression:"tombstone"}],class:{"vue-recyclist-transition":t.tombstone,"vue-recyclist__item--hidden":e.loaded},style:{opacity:+!e.loaded}},[t._t("tombstone")],2),i("div",{class:{"vue-recyclist-transition":t.tombstone,"vue-recyclist__item--hidden":!e.loaded},style:{opacity:+e.loaded}},[t._t("item",null,{data:e.data,index:s})],2)])})),i("div",{class:["vue-recyclist__pool",t.nomore?"vue-recyclist__pool--nomore":null]},[t._l(t.items,(function(e,s){return e.tomb||e.height?t._e():i("div",{key:s,ref:"item"+s,refInFor:!0,staticClass:"vue-recyclist-item vue-recyclist-invisible"},[t._t("item",null,{data:e.data,index:s})],2)})),i("div",{ref:"tomb",staticClass:"vue-recyclist-item vue-recyclist-invisible"},[t._t("tombstone")],2)],2)],2),i("div",{directives:[{name:"show",rawName:"v-show",value:t.spinner&&!t.nomore&&!t.tombstone,expression:"spinner && !nomore && !tombstone"}],staticClass:"vue-recyclist-loading",style:{visibility:t.loading?"visible":"hidden"}},[t._t("spinner",[t._m(0)])],2),i("div",{directives:[{name:"show",rawName:"v-show",value:t.nomore&&!t.loading,expression:"nomore && !loading"}],staticClass:"vue-recyclist-nomore"},[t._t("nomore",[i("div",[t._v("End of list")])])],2),i("div",{staticClass:"vue-recyclist-footer"},[t._t("footer")],2)])},l=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-recyclist-loading-content"},[i("div",{staticClass:"cssloading-circle vue-recyclist-spinner"})])}],a={props:{list:{type:Array,required:!0},tombstone:{type:Boolean,default:!1},size:{type:Number,default:20},offset:{type:Number,default:200},spinner:{type:Boolean,default:!0},nomore:{type:Boolean,default:!1},fixedItemHeight:{type:Boolean,default:!0},bypass:{type:Boolean,default:!1}},data(){return{name:"VueRecyclist",items:[],height:0,loadings:[],start:0,startOffset:0}},computed:{visibleItems(){return this.bypass?this.items:this.items.slice(Math.max(0,this.start-this.size),Math.min(this.items.length,this.start+this.size))},topPadding(){if(this.bypass)return 0;const t=this.visibleItems[0];return t?t.top:"0"},containerHeight(){return this.$el?this.$el.offsetHeight:0},tombHeight(){return this.tombstone?this.$refs.tomb&&this.$refs.tomb.offsetHeight:0},loading(){return this.loadings.length}},watch:{list(t){t.length?(this.loadings.pop(),this.loading||this.loadItems()):this.init()},items(t){t.length>this.list.length&&this.getItems()},nomore(t){t&&(this.height=this.containerHeight)}},mounted(){this.$el.addEventListener("scroll",this.onScroll.bind(this)),window.addEventListener("resize",this.onResize.bind(this)),this.init()},destroyed(){this.$el.removeEventListener("scroll",this.onScroll.bind(this)),window.removeEventListener("resize",this.onResize.bind(this))},methods:{init(){this.reset(),this.load()},reset(){this.items=[],this.height=0,this.top=0,this.start=0,this.$el.scrollTop=0},load(){this.tombstone?(this.items.length+=this.size,this.loadItems()):this.loading||this.getItems()},getItems(){this.loadings.push(1),this.$emit("loadmore")},loadItems(){const t=[],e=0,i=this.tombstone?this.items.length:this.list.length;for(let s=e;s<i;s+=1)this.items[s]&&this.items[s].loaded||(this.setItem(s,this.list[s]||null),t.push(this.$nextTick().then(()=>{this.updateItemHeight(s)})));Promise.all(t).then(()=>{this.updateItemTop()}),this.adjustWidth()},adjustWidth(){this.$refs.list&&(this.$refs.list.style.width=this.$el.scrollWidth+"px")},setItem(t,e){this.$set(this.items,t,{data:e||{},height:0,top:-1e3,tomb:!e,loaded:!!e})},updateItemHeight(t){const e=this.items[t],i=this.$refs["item"+t];i&&i[0]?e.height=i[0].offsetHeight:e.height=this.tombHeight},updateItemTop(){let t=0;for(let e=0;e<this.items.length;e+=1){const i=this.items[e-1];this.items[e].top=i?i.top+i.height:0,t+=this.items[e].height}this.height=t,this.startOffset&&this.setScrollTop(),this.updateIndex(),this.makeScrollable()},updateIndex(){const t=this.$el.scrollTop;for(let e=0;e<this.items.length;e+=1)if(this.items[e].top>t){this.start=Math.max(0,e-1);break}},getStartItemOffset(){this.items[this.start]&&(this.startOffset=this.items[this.start].top-this.$el.scrollTop)},setScrollTop(){this.items[this.start]&&(this.$el.scrollTop=this.items[this.start].top-this.startOffset,this.startOffset=0)},makeScrollable(){this.$el.classList.add("vue-recyclist-scrollable")},onScroll(){this.$el.scrollTop+this.$el.offsetHeight>this.height-this.offset&&this.load(),this.updateIndex()},onResize(){this.getStartItemOffset(),this.items.forEach(t=>{t.loaded=!1}),this.loadItems()}}},c=a;i("74a1"),i("689f");function h(t,e,i,s,n,o,r,l){var a,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),s&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),r?(a=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=a):n&&(a=l?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),a)if(c.functional){c._injectStyles=a;var h=c.render;c.render=function(t,e){return a.call(e),h(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,a):[a]}return{exports:t,options:c}}var d=h(c,r,l,!1,null,null,null),u=d.exports,f=u;"undefined"!==typeof window&&window.Vue&&window.Vue.component("vue-recyclist",u);e["default"]=f}})}));
//# sourceMappingURL=vue-recyclist.umd.min.js.map