!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.VueRecyclist=n():t.VueRecyclist=n()}(window,(function(){return function(t){var n={};function e(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var s in t)e.d(i,s,function(n){return t[n]}.bind(null,s));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="./example/",e(e.s=5)}([function(t,n,e){"use strict";t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e=function(t,n){var e=t[1]||"",i=t[3];if(!i)return e;if(n&&"function"==typeof btoa){var s=(r=i,a=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(l," */")),o=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[e].concat(o).concat([s]).join("\n")}var r,a,l;return[e].join("\n")}(n,t);return n[2]?"@media ".concat(n[2]," {").concat(e,"}"):e})).join("")},n.i=function(t,e,i){"string"==typeof t&&(t=[[null,t,""]]);var s={};if(i)for(var o=0;o<this.length;o++){var r=this[o][0];null!=r&&(s[r]=!0)}for(var a=0;a<t.length;a++){var l=[].concat(t[a]);i&&s[l[0]]||(e&&(l[2]?l[2]="".concat(e," and ").concat(l[2]):l[2]=e),n.push(l))}},n}},function(t,n,e){var i=e(7);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,e(3).default)("bd490cb8",i,!0,{})},function(t,n,e){var i=e(9);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,e(3).default)("2bf860ac",i,!0,{})},function(t,n,e){"use strict";function i(t,n){for(var e=[],i={},s=0;s<n.length;s++){var o=n[s],r=o[0],a={id:t+":"+s,css:o[1],media:o[2],sourceMap:o[3]};i[r]?i[r].parts.push(a):e.push(i[r]={id:r,parts:[a]})}return e}e.r(n),e.d(n,"default",(function(){return u}));var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},r=s&&(document.head||document.getElementsByTagName("head")[0]),a=null,l=0,d=!1,c=function(){},A=null,h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function u(t,n,e,s){d=e,A=s||{};var r=i(t,n);return f(r),function(n){for(var e=[],s=0;s<r.length;s++){var a=r[s];(l=o[a.id]).refs--,e.push(l)}n?f(r=i(t,n)):r=[];for(s=0;s<e.length;s++){var l;if(0===(l=e[s]).refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete o[l.id]}}}}function f(t){for(var n=0;n<t.length;n++){var e=t[n],i=o[e.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](e.parts[s]);for(;s<e.parts.length;s++)i.parts.push(p(e.parts[s]));i.parts.length>e.parts.length&&(i.parts.length=e.parts.length)}else{var r=[];for(s=0;s<e.parts.length;s++)r.push(p(e.parts[s]));o[e.id]={id:e.id,refs:1,parts:r}}}}function m(){var t=document.createElement("style");return t.type="text/css",r.appendChild(t),t}function p(t){var n,e,i=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(i){if(d)return c;i.parentNode.removeChild(i)}if(h){var s=l++;i=a||(a=m()),n=y.bind(null,i,s,!1),e=y.bind(null,i,s,!0)}else i=m(),n=C.bind(null,i),e=function(){i.parentNode.removeChild(i)};return n(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;n(t=i)}else e()}}var v,g=(v=[],function(t,n){return v[t]=n,v.filter(Boolean).join("\n")});function y(t,n,e,i){var s=e?"":i.css;if(t.styleSheet)t.styleSheet.cssText=g(n,s);else{var o=document.createTextNode(s),r=t.childNodes;r[n]&&t.removeChild(r[n]),r.length?t.insertBefore(o,r[n]):t.appendChild(o)}}function C(t,n){var e=n.css,i=n.media,s=n.sourceMap;if(i&&t.setAttribute("media",i),A.ssrId&&t.setAttribute("data-vue-ssr-id",n.id),s&&(e+="\n/*# sourceURL="+s.sources[0]+" */",e+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},function(t,n,e){"use strict";function i(t,n,e,i,s,o,r,a){var l,d="function"==typeof t?t.options:t;if(n&&(d.render=n,d.staticRenderFns=e,d._compiled=!0),i&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},d._ssrRegister=l):s&&(l=a?function(){s.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(d.functional){d._injectStyles=l;var c=d.render;d.render=function(t,n){return l.call(n),c(t,n)}}else{var A=d.beforeCreate;d.beforeCreate=A?[].concat(A,l):[l]}return{exports:t,options:d}}e.d(n,"a",(function(){return i}))},function(t,n,e){"use strict";e.r(n);var i={props:{list:{type:Array,required:!0},tombstone:{type:Boolean,default:!1},size:{type:Number,default:20},offset:{type:Number,default:200},loadmore:{type:Function,required:!0},spinner:{type:Boolean,default:!0},nomore:{type:Boolean,default:!1},fixedItemHeight:{type:Boolean,default:!0},bypass:{type:Boolean,default:!1}},data:()=>({name:"VueRecyclist",items:[],height:0,loadings:[],start:0,startOffset:0}),computed:{visibleItems(){return this.bypass?this.items:this.items.slice(Math.max(0,this.start-this.size),Math.min(this.items.length,this.start+this.size))},topPadding(){if(this.bypass)return 0;const t=this.visibleItems[0];return t?t.top:"0"},containerHeight(){return this.$el&&this.$el.offsetHeight||0},tombHeight(){return this.tombstone?this.$refs.tomb&&this.$refs.tomb.offsetHeight:0},loading(){return this.loadings.length}},watch:{list(t){t.length?(this.loadings.pop(),this.loading||this.loadItems()):this.init()},items(t){t.length>this.list.length&&this.getItems()}},mounted(){this.$el.addEventListener("scroll",this.onScroll.bind(this)),window.addEventListener("resize",this.onResize.bind(this)),this.init()},destroyed(){this.$el.removeEventListener("scroll",this.onScroll.bind(this)),window.removeEventListener("resize",this.onResize.bind(this))},methods:{init(){this.reset(),this.load()},reset(){this.items=[],this.height=this.top=this.start=0,this.$el.scrollTop=0},load(){this.tombstone?(this.items.length+=this.size,this.loadItems()):this.loading||this.getItems()},getItems(){this.loadings.push(1),this.loadmore()},loadItems(){const t=[],n=this.tombstone?this.items.length:this.list.length;for(let e=0;e<n;e+=1)this.items[e]&&this.items[e].loaded||(this.setItem(e,this.list[e]||null),t.push(this.$nextTick().then(()=>{this.updateItemHeight(e)})));Promise.all(t).then(()=>{this.updateItemTop()}),this.adjustWidth()},adjustWidth(){this.$refs.list&&(this.$refs.list.style.width=this.$el.scrollWidth+"px")},setItem(t,n){this.$set(this.items,t,{data:n||{},height:0,top:-1e3,tomb:!n,loaded:!!n})},updateItemHeight(t){const n=this.items[t],e=this.$refs["item"+t];e&&e[0]?n.height=e[0].offsetHeight:n.height=this.tombHeight},updateItemTop(){this.height=0;for(let t=0;t<this.items.length;t+=1){const n=this.items[t-1];this.items[t].top=n?n.top+n.height:0,this.height+=this.items[t].height}this.startOffset&&this.setScrollTop(),this.updateIndex(),this.makeScrollable()},updateIndex(){const t=this.$el.scrollTop;for(let n=0;n<this.items.length;n+=1)if(this.items[n].top>t){this.start=Math.max(0,n-1);break}},getStartItemOffset(){this.items[this.start]&&(this.startOffset=this.items[this.start].top-this.$el.scrollTop)},setScrollTop(){this.items[this.start]&&(this.$el.scrollTop=this.items[this.start].top-this.startOffset,this.startOffset=0)},makeScrollable(){this.$el.classList.add("vue-recyclist-scrollable")},onScroll(){this.$el.scrollTop+this.$el.offsetHeight>this.height-this.offset&&this.load(),this.updateIndex()},onResize(){this.getStartItemOffset(),this.items.forEach(t=>{t.loaded=!1}),this.loadItems()}}},s=(e(6),e(8),e(4)),o=Object(s.a)(i,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{class:["vue-recyclist",t.fixedItemHeight?"vue-recyclist--scroll-auto":"vue-recyclist--scroll-y"]},[e("div",{staticClass:"vue-recyclist-header"},[t._t("header")],2),t._v(" "),e("div",{ref:"list",staticClass:"vue-recyclist-items",style:{height:t.height+"px","padding-top":t.topPadding+"px"}},[t._l(t.visibleItems,(function(n,i){return e("div",{key:i,staticClass:"vue-recyclist-item"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.tombstone,expression:"tombstone"}],class:{"vue-recyclist-transition":t.tombstone,"vue-recyclist__item--hidden":n.loaded},style:{opacity:+!n.loaded}},[t._t("tombstone")],2),t._v(" "),e("div",{class:{"vue-recyclist-transition":t.tombstone,"vue-recyclist__item--hidden":!n.loaded},style:{opacity:+n.loaded}},[t._t("item",null,{data:n.data,index:i})],2)])})),t._v(" "),e("div",{staticClass:"vue-recyclist-pool"},[t._l(t.items,(function(n,i){return n.tomb||n.height?t._e():e("div",{key:i,ref:"item"+i,refInFor:!0,staticClass:"vue-recyclist-item vue-recyclist-invisible"},[t._t("item",null,{data:n.data,index:i})],2)})),t._v(" "),e("div",{ref:"tomb",staticClass:"vue-recyclist-item vue-recyclist-invisible"},[t._t("tombstone")],2)],2)],2),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.spinner&&!t.nomore&&!t.tombstone,expression:"spinner && !nomore && !tombstone"}],staticClass:"vue-recyclist-loading",style:{visibility:t.loading?"visible":"hidden"}},[t._t("spinner",[t._m(0)])],2),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.nomore&&!t.loading,expression:"nomore && !loading"}],staticClass:"vue-recyclist-nomore"},[t._t("nomore",[e("div",[t._v("End of list")])])],2),t._v(" "),e("div",{staticClass:"vue-recyclist-footer"},[t._t("footer")],2)])}),[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"vue-recyclist-loading-content"},[n("div",{staticClass:"cssloading-circle vue-recyclist-spinner"})])}],!1,null,null,null).exports;n.default=o;"undefined"!=typeof window&&window.Vue&&window.Vue.component("vue-recyclist",o)},function(t,n,e){"use strict";var i=e(1);e.n(i).a},function(t,n,e){"use strict";e.r(n);var i=e(0),s=e.n(i)()(!0);s.push([t.i,'@-webkit-keyframes csl-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes csl-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.cssloading-circle{box-sizing:border-box;display:block;position:relative;width:30px;height:30px;font-size:2px;color:#87cefa;background:#fff;border-radius:50%;overflow:hidden;-webkit-animation:csl-rotate 1s infinite linear;animation:csl-rotate 1s infinite linear}.cssloading-circle:after,.cssloading-circle:before{content:"";display:block;position:absolute}.cssloading-circle:before{top:0;right:0;bottom:0;left:0;font-size:100em;border:.01em solid currentColor;border-radius:50%}.cssloading-circle:after{top:0;left:50%;width:50%;height:50%;-webkit-transform:translate3d(0,100%,0) skew(20deg,20deg) rotate(0deg);transform:translate3d(0,100%,0) skew(20deg,20deg) rotate(0deg);-webkit-transform-origin:left top;transform-origin:left top;background-color:inherit}',"",{version:3,sources:["cssloading.css"],names:[],mappings:"AAAA,8BAA8B,GAAG,8BAA8B,CAAC,sBAAsB,CAAC,GAAG,+BAA+B,CAAC,uBAAuB,CAAC,CAAC,sBAAsB,GAAG,8BAA8B,CAAC,sBAAsB,CAAC,GAAG,+BAA+B,CAAC,uBAAuB,CAAC,CAAC,mBAAmB,qBAAqB,CAAC,aAAa,CAAC,iBAAiB,CAAC,UAAU,CAAC,WAAW,CAAC,aAAa,CAAC,aAAa,CAAC,eAAe,CAAC,iBAAiB,CAAC,eAAe,CAAC,+CAA+C,CAAC,uCAAuC,CAAC,mDAAmD,UAAU,CAAC,aAAa,CAAC,iBAAiB,CAAC,0BAA0B,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAe,CAAC,+BAA+B,CAAC,iBAAiB,CAAC,yBAAyB,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU,CAAC,sEAAsE,CAAC,8DAA8D,CAAC,iCAAiC,CAAC,yBAAyB,CAAC,wBAAwB",file:"cssloading.css",sourcesContent:['@-webkit-keyframes csl-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes csl-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.cssloading-circle{box-sizing:border-box;display:block;position:relative;width:30px;height:30px;font-size:2px;color:#87cefa;background:#fff;border-radius:50%;overflow:hidden;-webkit-animation:csl-rotate 1s infinite linear;animation:csl-rotate 1s infinite linear}.cssloading-circle:after,.cssloading-circle:before{content:"";display:block;position:absolute}.cssloading-circle:before{top:0;right:0;bottom:0;left:0;font-size:100em;border:.01em solid currentColor;border-radius:50%}.cssloading-circle:after{top:0;left:50%;width:50%;height:50%;-webkit-transform:translate3d(0,100%,0) skew(20deg,20deg) rotate(0deg);transform:translate3d(0,100%,0) skew(20deg,20deg) rotate(0deg);-webkit-transform-origin:left top;transform-origin:left top;background-color:inherit}']}]),n.default=s},function(t,n,e){"use strict";var i=e(2);e.n(i).a},function(t,n,e){"use strict";e.r(n);var i=e(0),s=e.n(i)()(!0);s.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n--duration: 500ms;\n.vue-recyclist {\n    overflow-x: hidden;\n    position: relative;\n}\n.vue-recyclist--scroll-auto {\n    overflow-y: auto;\n}\n.vue-recyclist--scroll-y {\n    overflow-y: scroll;\n}\n.vue-recyclist-scrollable {\n    -webkit-overflow-scrolling: touch;\n}\n.vue-recyclist-items {\n    z-index: 1;\n    position: relative;\n    margin: 0;\n    padding: 0;\n    transform: translate3d(0,0,0);\n}\n.vue-recyclist-invisible {\n    top: -1000px;\n    visibility: hidden;\n}\n.vue-recyclist-item {\n    position: relative;\n    width: 100%;\n}\n.vue-recyclist__item--hidden {\n    display: none;\n}\n.vue-recyclist-transition {\n    opacity: 0;\n    transition-property: opacity;\n    transition-duration: var(--duration);\n}\n.vue-recyclist-loading {\n    overflow: hidden;\n}\n.vue-recyclist-loading-content {\n    width: 100%;\n    text-align: center;\n}\n.vue-recyclist-spinner {\n    margin: 10px auto;\n    width: 20px;\n    height: 20px;\n}\n.vue-recyclist-nomore {\n    overflow: hidden;\n    margin: 10px auto;\n    height: 20px;\n    text-align: center;\n}\n.vue-recyclist-header {\n    position: -webkit-sticky;\n    position: sticky;\n    z-index: 2;\n    top: 0;\n    align-self: flex-start;\n    transform: translate3d(0,0,0);\n}\n.vue-recyclist-footer {\n    position: -webkit-sticky;\n    position: sticky;\n    z-index: 2;\n    bottom: 0;\n    align-self: flex-end;\n    transform: translate3d(0,0,0);\n}\n","",{version:3,sources:["src/components/VueRecyclist.vue"],names:[],mappings:";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsUA,iBAAA;AACA;IACA,kBAAA;IACA,kBAAA;AACA;AACA;IACA,gBAAA;AACA;AACA;IACA,kBAAA;AACA;AACA;IACA,iCAAA;AACA;AACA;IACA,UAAA;IACA,kBAAA;IACA,SAAA;IACA,UAAA;IACA,6BAAA;AACA;AACA;IACA,YAAA;IACA,kBAAA;AACA;AACA;IACA,kBAAA;IACA,WAAA;AACA;AACA;IACA,aAAA;AACA;AACA;IACA,UAAA;IACA,4BAAA;IACA,oCAAA;AACA;AACA;IACA,gBAAA;AACA;AACA;IACA,WAAA;IACA,kBAAA;AACA;AACA;IACA,iBAAA;IACA,WAAA;IACA,YAAA;AACA;AACA;IACA,gBAAA;IACA,iBAAA;IACA,YAAA;IACA,kBAAA;AACA;AACA;IACA,wBAAA;IACA,gBAAA;IACA,UAAA;IACA,MAAA;IACA,sBAAA;IACA,6BAAA;AACA;AACA;IACA,wBAAA;IACA,gBAAA;IACA,UAAA;IACA,SAAA;IACA,oBAAA;IACA,6BAAA;AACA",file:"VueRecyclist.vue",sourcesContent:['<template>\n    <div :class="[\n        \'vue-recyclist\',\n        fixedItemHeight ? \'vue-recyclist--scroll-auto\': \'vue-recyclist--scroll-y\',\n    ]"\n    >\n        <div class="vue-recyclist-header">\n            <slot name="header" />\n        </div>\n        <div\n            ref="list"\n            class="vue-recyclist-items"\n            :style="{height: height + \'px\', \'padding-top\': topPadding + \'px\'}"\n        >\n            <div\n                v-for="(item, index) in visibleItems"\n                :key="index"\n                class="vue-recyclist-item"\n            >\n                <div\n                    v-show="tombstone"\n                    :class="{\n                        \'vue-recyclist-transition\': tombstone,\n                        \'vue-recyclist__item--hidden\': item.loaded,\n                    }"\n                    :style="{opacity: +!item.loaded}"\n                >\n                    <slot name="tombstone" />\n                </div>\n                <div\n                    :class="{\n                        \'vue-recyclist-transition\': tombstone,\n                        \'vue-recyclist__item--hidden\': !item.loaded,\n                    }"\n                    :style="{opacity: +item.loaded}"\n                >\n                    <slot\n                        name="item"\n                        :data="item.data"\n                        :index="index"\n                    />\n                </div>\n            </div>\n\n            \x3c!--get tombstone and item heights from these invisible doms--\x3e\n            <div class="vue-recyclist-pool">\n                <div\n                    :ref="\'item\'+index"\n                    v-for="(item, index) in items"\n                    :key="index"\n                    v-if="!item.tomb && !item.height"\n                    class="vue-recyclist-item vue-recyclist-invisible"\n                >\n                    <slot\n                        name="item"\n                        :data="item.data"\n                        :index="index"\n                    />\n                </div>\n                <div\n                    ref="tomb"\n                    class="vue-recyclist-item vue-recyclist-invisible"\n                >\n                    <slot name="tombstone" />\n                </div>\n            </div>\n        </div>\n\n        <div\n            v-show="spinner && !nomore && !tombstone"\n            class="vue-recyclist-loading"\n            :style="{visibility: loading ? \'visible\' : \'hidden\'}"\n        >\n            <slot name="spinner">\n                <div class="vue-recyclist-loading-content">\n                    <div class="cssloading-circle vue-recyclist-spinner" />\n                </div>\n            </slot>\n        </div>\n\n        <div\n            v-show="nomore && !loading"\n            class="vue-recyclist-nomore"\n        >\n            <slot name="nomore">\n                <div>End of list</div>\n            </slot>\n        </div>\n        <div class="vue-recyclist-footer">\n            <slot name="footer" />\n        </div>\n    </div>\n</template>\n<script>\nexport default {\n    props: {\n        list: {\n            type: Array,\n            required: true,\n        },\n        tombstone: {\n            type: Boolean,\n            default: false, // Whether to show tombstones.\n        },\n        size: {\n            type: Number,\n            default: 20, // The number of items added each time.\n        },\n        offset: {\n            type: Number,\n            default: 200, // The number of pixels of additional length to allow scrolling to.\n        },\n        loadmore: {\n            type: Function,\n            required: true, // The function of loading more items.\n        },\n        spinner: {\n            type: Boolean,\n            default: true, // Whether to show loading spinner.\n        },\n        nomore: {\n            type: Boolean,\n            default: false, // Whether to show \'no more data\' status bar\n        },\n        fixedItemHeight: {\n            type: Boolean,\n            default: true, // item height fixed or dynamic\n        },\n        bypass: {\n            type: Boolean,\n            default: false, // render list as is w/o recycling\n        },\n    },\n    data () {\n        return {\n            name: \'VueRecyclist\',\n            items: [], // Wrapped full list items\n            height: 0, // Full list height\n            loadings: [], // Loading status queue\n            start: 0, // Visible items start index\n            startOffset: 0, // Start item offset\n        }\n    },\n    computed: {\n        visibleItems () {\n            if (this.bypass) {\n                return this.items\n            }\n            return this.items.slice(\n                Math.max(0, this.start - this.size),\n                Math.min(this.items.length, this.start + this.size),\n            )\n        },\n\n        topPadding () {\n            if (this.bypass) {\n                return 0\n            }\n            const firstItem = this.visibleItems[0]\n            return firstItem ? firstItem.top : \'0\'\n        },\n        containerHeight () {\n            return this.$el && this.$el.offsetHeight || 0 // eslint-disable-line\n        },\n        tombHeight () {\n            return this.tombstone ? this.$refs.tomb && this.$refs.tomb.offsetHeight : 0\n        },\n        loading () {\n            return this.loadings.length\n        },\n    },\n    watch: {\n        list (arr) {\n            if (arr.length) {\n                this.loadings.pop()\n                if (!this.loading) {\n                    this.loadItems()\n                }\n            } else {\n                this.init()\n            }\n        },\n        items (arr) {\n            if (arr.length > this.list.length) {\n                this.getItems()\n            }\n        },\n    },\n    mounted () {\n        this.$el.addEventListener(\'scroll\', this.onScroll.bind(this))\n        window.addEventListener(\'resize\', this.onResize.bind(this))\n        this.init()\n    },\n    destroyed () {\n        this.$el.removeEventListener(\'scroll\', this.onScroll.bind(this))\n        window.removeEventListener(\'resize\', this.onResize.bind(this))\n    },\n    methods: {\n        init () {\n            this.reset()\n            this.load()\n        },\n        reset () {\n            this.items = []\n            this.height = this.top = this.start = 0 // eslint-disable-line\n            this.$el.scrollTop = 0\n        },\n        load () {\n            if (this.tombstone) {\n                this.items.length += this.size\n                this.loadItems()\n            } else if (!this.loading) {\n                this.getItems()\n            }\n        },\n        getItems () {\n            this.loadings.push(1)\n            this.loadmore()\n        },\n        loadItems () {\n            const loads = []\n            const start = 0\n            const end = this.tombstone ? this.items.length : this.list.length\n            for (let i = start; i < end; i += 1) {\n                if (this.items[i] && this.items[i].loaded) {\n                    continue // eslint-disable-line\n                }\n                this.setItem(i, this.list[i] || null)\n                // update newly added items position\n                loads.push(this.$nextTick().then(() => {\n                    this.updateItemHeight(i)\n                }))\n            }\n            // update items top and full list height\n            Promise.all(loads).then(() => {\n                this.updateItemTop()\n            })\n            this.adjustWidth()\n        },\n        adjustWidth () {\n            if (this.$refs.list) {\n                this.$refs.list.style.width = `${this.$el.scrollWidth}px`\n            }\n        },\n        setItem (index, data) {\n            this.$set(this.items, index, {\n                data: data || {},\n                height: 0,\n                top: -1000,\n                tomb: !data,\n                loaded: !!data,\n            })\n        },\n        updateItemHeight (index) {\n            // update item height\n            const cur = this.items[index]\n            const dom = this.$refs[`item${index}`]\n            if (dom && dom[0]) {\n                cur.height = dom[0].offsetHeight\n            } else {\n                // item is tombstone\n                cur.height = this.tombHeight\n            }\n        },\n        updateItemTop () {\n            // loop all items to update item top and list height\n            this.height = 0\n            for (let i = 0; i < this.items.length; i += 1) {\n                const pre = this.items[i - 1]\n                this.items[i].top = pre ? pre.top + pre.height : 0\n                this.height += this.items[i].height\n            }\n            // update scroll top when needed\n            if (this.startOffset) {\n                this.setScrollTop()\n            }\n            this.updateIndex()\n            this.makeScrollable()\n        },\n        updateIndex () {\n            // update visible items start index\n            const top = this.$el.scrollTop\n            for (let i = 0; i < this.items.length; i += 1) {\n                if (this.items[i].top > top) {\n                    this.start = Math.max(0, i - 1)\n                    break\n                }\n            }\n            // scrolling does not need recalculate scrolltop\n            // this.getStartItemOffset()\n        },\n        getStartItemOffset () {\n            if (this.items[this.start]) {\n                this.startOffset = this.items[this.start].top - this.$el.scrollTop\n            }\n        },\n        setScrollTop () {\n            if (this.items[this.start]) {\n                this.$el.scrollTop = this.items[this.start].top - this.startOffset\n                // reset start item offset\n                this.startOffset = 0\n            }\n        },\n        makeScrollable () {\n            // make ios -webkit-overflow-scrolling scrollable\n            this.$el.classList.add(\'vue-recyclist-scrollable\')\n        },\n        onScroll () {\n            if (this.$el.scrollTop + this.$el.offsetHeight > this.height - this.offset) {\n                this.load()\n            }\n            this.updateIndex()\n        },\n        onResize () {\n            this.getStartItemOffset()\n            this.items.forEach((item) => {\n                item.loaded = false\n            })\n            this.loadItems()\n        },\n    },\n}\n\n<\/script>\n<style src="./cssloading.css"></style>\n<style>\n    --duration: 500ms;\n    .vue-recyclist {\n        overflow-x: hidden;\n        position: relative;\n    }\n    .vue-recyclist--scroll-auto {\n        overflow-y: auto;\n    }\n    .vue-recyclist--scroll-y {\n        overflow-y: scroll;\n    }\n    .vue-recyclist-scrollable {\n        -webkit-overflow-scrolling: touch;\n    }\n    .vue-recyclist-items {\n        z-index: 1;\n        position: relative;\n        margin: 0;\n        padding: 0;\n        transform: translate3d(0,0,0);\n    }\n    .vue-recyclist-invisible {\n        top: -1000px;\n        visibility: hidden;\n    }\n    .vue-recyclist-item {\n        position: relative;\n        width: 100%;\n    }\n    .vue-recyclist__item--hidden {\n        display: none;\n    }\n    .vue-recyclist-transition {\n        opacity: 0;\n        transition-property: opacity;\n        transition-duration: var(--duration);\n    }\n    .vue-recyclist-loading {\n        overflow: hidden;\n    }\n    .vue-recyclist-loading-content {\n        width: 100%;\n        text-align: center;\n    }\n    .vue-recyclist-spinner {\n        margin: 10px auto;\n        width: 20px;\n        height: 20px;\n    }\n    .vue-recyclist-nomore {\n        overflow: hidden;\n        margin: 10px auto;\n        height: 20px;\n        text-align: center;\n    }\n    .vue-recyclist-header {\n        position: -webkit-sticky;\n        position: sticky;\n        z-index: 2;\n        top: 0;\n        align-self: flex-start;\n        transform: translate3d(0,0,0);\n    }\n    .vue-recyclist-footer {\n        position: -webkit-sticky;\n        position: sticky;\n        z-index: 2;\n        bottom: 0;\n        align-self: flex-end;\n        transform: translate3d(0,0,0);\n    }\n</style>\n']}]),n.default=s}])}));
//# sourceMappingURL=vue-recyclist.js.map