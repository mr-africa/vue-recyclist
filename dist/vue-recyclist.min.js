!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VueRecyclist=e():t.VueRecyclist=e()}(this,function(){return function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./example/",e(e.s=5)}([function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var i=this[e];i[2]?t.push("@media "+i[2]+"{"+i[1]+"}"):t.push(i[1])}return t.join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var s={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(s[o]=!0)}for(n=0;n<e.length;n++){var r=e[n];"number"==typeof r[0]&&s[r[0]]||(i&&!r[2]?r[2]=i:i&&(r[2]="("+r[2]+") and ("+i+")"),t.push(r))}},t}},function(t,e,i){function s(t){for(var e=0;e<t.length;e++){var i=t[e],s=d[i.id];if(s){s.refs++;for(var n=0;n<s.parts.length;n++)s.parts[n](i.parts[n]);for(;n<i.parts.length;n++)s.parts.push(o(i.parts[n]));s.parts.length>i.parts.length&&(s.parts.length=i.parts.length)}else{for(var r=[],n=0;n<i.parts.length;n++)r.push(o(i.parts[n]));d[i.id]={id:i.id,refs:1,parts:r}}}}function n(){var t=document.createElement("style");return t.type="text/css",u.appendChild(t),t}function o(t){var e,i,s=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(s){if(p)return m;s.parentNode.removeChild(s)}if(v){var o=f++;s=h||(h=n()),e=r.bind(null,s,o,!1),i=r.bind(null,s,o,!0)}else s=n(),e=a.bind(null,s),i=function(){s.parentNode.removeChild(s)};return e(t),function(s){if(s){if(s.css===t.css&&s.media===t.media&&s.sourceMap===t.sourceMap)return;e(t=s)}else i()}}function r(t,e,i,s){var n=i?"":s.css;if(t.styleSheet)t.styleSheet.cssText=g(e,n);else{var o=document.createTextNode(n),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(o,r[e]):t.appendChild(o)}}function a(t,e){var i=e.css,s=e.media,n=e.sourceMap;if(s&&t.setAttribute("media",s),n&&(i+="\n/*# sourceURL="+n.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=i(11),d={},u=l&&(document.head||document.getElementsByTagName("head")[0]),h=null,f=0,p=!1,m=function(){},v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,i){p=i;var n=c(t,e);return s(n),function(e){for(var i=[],o=0;o<n.length;o++){var r=n[o],a=d[r.id];a.refs--,i.push(a)}e?(n=c(t,e),s(n)):n=[];for(var o=0;o<i.length;o++){var a=i[o];if(0===a.refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete d[a.id]}}}};var g=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()},function(t,e,i){i(10),i(9);var s=i(3)(i(4),i(8),null,null);t.exports=s.exports},function(t,e){t.exports=function(t,e,i,s){var n,o=t=t||{},r=typeof t.default;"object"!==r&&"function"!==r||(n=t,o=t.default);var a="function"==typeof o?o.options:o;if(e&&(a.render=e.render,a.staticRenderFns=e.staticRenderFns),i&&(a._scopeId=i),s){var l=a.computed||(a.computed={});Object.keys(s).forEach(function(t){var e=s[t];l[t]=function(){return e}})}return{esModule:n,exports:o,options:a}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{list:{type:Array,required:!0},tombstone:{type:Boolean,default:!1},size:{type:Number,default:20},offset:{type:Number,default:200},loadmore:{type:Function,required:!0},spinner:{type:Boolean,default:!0},nomore:{type:Boolean,default:!1},fixedItemHeight:{type:Boolean,default:!0},bypass:{type:Boolean,default:!1}},data:function(){return{name:"VueRecyclist",items:[],height:0,loadings:[],start:0,startOffset:0}},computed:{visibleItems:function(){return this.bypass?this.items:this.items.slice(Math.max(0,this.start-this.size),Math.min(this.items.length,this.start+this.size))},topPadding:function(){if(this.bypass)return 0;var t=this.visibleItems[0];return t?t.top:"0"},containerHeight:function(){return this.$el&&this.$el.offsetHeight||0},tombHeight:function(){return this.tombstone?this.$refs.tomb&&this.$refs.tomb.offsetHeight:0},loading:function(){return this.loadings.length}},watch:{list:function(t){t.length?(this.loadings.pop(),this.loading||this.loadItems()):this.init()},items:function(t){t.length>this.list.length&&this.getItems()}},mounted:function(){this.$el.addEventListener("scroll",this.onScroll.bind(this)),window.addEventListener("resize",this.onResize.bind(this)),this.init()},destroyed:function(){this.$el.removeEventListener("scroll",this.onScroll.bind(this)),window.removeEventListener("resize",this.onResize.bind(this))},methods:{init:function(){this.reset(),this.load()},reset:function(){this.items=[],this.height=this.top=this.start=0,this.$el.scrollTop=0},load:function(){this.tombstone?(this.items.length+=this.size,this.loadItems()):this.loading||this.getItems()},getItems:function(){this.loadings.push(1),this.loadmore()},loadItems:function(){for(var t=this,e=[],i=this.tombstone?this.items.length:this.list.length,s=0;s<i;s+=1){(function(i){if(t.items[i]&&t.items[i].loaded)return"continue";t.setItem(i,t.list[i]||null),e.push(t.$nextTick().then(function(){t.updateItemHeight(i)}))})(s)}Promise.all(e).then(function(){t.updateItemTop()}),this.adjustWidth()},adjustWidth:function(){this.$refs.list&&(this.$refs.list.style.width=this.$el.scrollWidth+"px")},setItem:function(t,e){this.$set(this.items,t,{data:e||{},height:0,top:-1e3,tomb:!e,loaded:!!e})},updateItemHeight:function(t){var e=this.items[t],i=this.$refs["item"+t];i&&i[0]?e.height=i[0].offsetHeight:e.height=this.tombHeight},updateItemTop:function(){this.height=0;for(var t=0;t<this.items.length;t+=1){var e=this.items[t-1];this.items[t].top=e?e.top+e.height:0,this.height+=this.items[t].height}this.startOffset&&this.setScrollTop(),this.updateIndex(),this.makeScrollable()},updateIndex:function(){for(var t=this.$el.scrollTop,e=0;e<this.items.length;e+=1)if(this.items[e].top>t){this.start=Math.max(0,e-1);break}},getStartItemOffset:function(){this.items[this.start]&&(this.startOffset=this.items[this.start].top-this.$el.scrollTop)},setScrollTop:function(){this.items[this.start]&&(this.$el.scrollTop=this.items[this.start].top-this.startOffset,this.startOffset=0)},makeScrollable:function(){this.$el.classList.add("vue-recyclist-scrollable")},onScroll:function(){this.$el.scrollTop+this.$el.offsetHeight>this.height-this.offset&&this.load(),this.updateIndex()},onResize:function(){this.getStartItemOffset(),this.items.forEach(function(t){t.loaded=!1}),this.loadItems()}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(2),n=i.n(s);e.default=n.a,"undefined"!=typeof window&&window.Vue&&window.Vue.component("vue-recyclist",n.a)},function(t,e,i){e=t.exports=i(0)(),e.push([t.i,"--duration:500ms;.vue-recyclist{overflow-x:hidden;position:relative}.vue-recyclist--scroll-auto{overflow-y:auto}.vue-recyclist--scroll-y{overflow-y:scroll}.vue-recyclist-scrollable{-webkit-overflow-scrolling:touch}.vue-recyclist-items{z-index:1;position:relative;margin:0;padding:0;transform:translateZ(0)}.vue-recyclist-invisible{top:-1000px;visibility:hidden}.vue-recyclist-item{position:relative;width:100%}.vue-recyclist__item--hidden{display:none}.vue-recyclist-transition{opacity:0;transition-property:opacity;transition-duration:var(--duration)}.vue-recyclist-loading{overflow:hidden}.vue-recyclist-loading-content{width:100%;text-align:center}.vue-recyclist-spinner{margin:10px auto;width:20px;height:20px}.vue-recyclist-nomore{overflow:hidden;margin:10px auto;height:20px;text-align:center}.vue-recyclist-header{top:0;align-self:flex-start}.vue-recyclist-footer,.vue-recyclist-header{position:-webkit-sticky;position:sticky;z-index:2;transform:translateZ(0)}.vue-recyclist-footer{bottom:0;align-self:flex-end}",""])},function(t,e,i){e=t.exports=i(0)(),e.push([t.i,'@keyframes csl-rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.cssloading-circle{box-sizing:border-box;display:block;position:relative;width:30px;height:30px;font-size:2px;color:#87cefa;background:#fff;border-radius:50%;overflow:hidden;animation:csl-rotate 1s infinite linear}.cssloading-circle:after,.cssloading-circle:before{content:"";display:block;position:absolute}.cssloading-circle:before{top:0;right:0;bottom:0;left:0;font-size:100em;border:.01em solid currentColor;border-radius:50%}.cssloading-circle:after{top:0;left:50%;width:50%;height:50%;transform:translate3d(0,100%,0) skew(20deg,20deg) rotate(0deg);transform-origin:left top;background-color:inherit}',""])},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["vue-recyclist",t.fixedItemHeight?"vue-recyclist--scroll-auto":"vue-recyclist--scroll-y"]},[i("div",{staticClass:"vue-recyclist-header"},[t._t("header")],2),t._v(" "),i("div",{ref:"list",staticClass:"vue-recyclist-items",style:{height:t.height+"px","padding-top":t.topPadding+"px"}},[t._l(t.visibleItems,function(e,s){return i("div",{key:s,staticClass:"vue-recyclist-item"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.tombstone,expression:"tombstone"}],class:{"vue-recyclist-transition":t.tombstone,"vue-recyclist__item--hidden":e.loaded}},[t._t("tombstone")],2),t._v(" "),i("div",{class:{"vue-recyclist-transition":t.tombstone,"vue-recyclist__item--hidden":!e.loaded},style:{opacity:+e.loaded}},[t._t("item",null,{data:e.data,index:s})],2)])}),t._v(" "),i("div",{staticClass:"vue-recyclist-pool"},[t._l(t.items,function(e,s){return e.tomb||e.height?t._e():i("div",{key:s,ref:"item"+s,refInFor:!0,staticClass:"vue-recyclist-item vue-recyclist-invisible"},[t._t("item",null,{data:e.data,index:s})],2)}),t._v(" "),i("div",{ref:"tomb",staticClass:"vue-recyclist-item vue-recyclist-invisible"},[t._t("tombstone")],2)],2)],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.spinner&&!t.nomore&&!t.tombstone,expression:"spinner && !nomore && !tombstone"}],staticClass:"vue-recyclist-loading",style:{visibility:t.loading?"visible":"hidden"}},[t._t("spinner",[t._m(0)])],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.nomore&&!t.loading,expression:"nomore && !loading"}],staticClass:"vue-recyclist-nomore"},[t._t("nomore",[i("div",[t._v("End of list")])])],2),t._v(" "),i("div",{staticClass:"vue-recyclist-footer"},[t._t("footer")],2)])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-recyclist-loading-content"},[i("div",{staticClass:"cssloading-circle vue-recyclist-spinner"})])}]}},function(t,e,i){var s=i(6);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i(1)("b0d6fd62",s,!0)},function(t,e,i){var s=i(7);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i(1)("32418388",s,!0)},function(t,e){t.exports=function(t,e){for(var i=[],s={},n=0;n<e.length;n++){var o=e[n],r=o[0],a=o[1],l=o[2],c=o[3],d={id:t+":"+n,css:a,media:l,sourceMap:c};s[r]?s[r].parts.push(d):i.push(s[r]={id:r,parts:[d]})}return i}}])});
//# sourceMappingURL=vue-recyclist.min.js.map